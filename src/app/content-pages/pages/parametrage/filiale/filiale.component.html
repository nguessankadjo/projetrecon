<div class="content-global-utilisateur">
    <div class="header-content">
        <div class="header-left">
            <p>Liste des filiales</p>
        </div>
        <div class="header-rigth">
            <div class="search">
                <nz-input-group [nzSuffix]="suffixIconSearch">
                    <input type="text" style="height: 25px;" nz-input placeholder="Recherche d'un utilisateur" />
                </nz-input-group>
                <ng-template #suffixIconSearch>
                    <span nz-icon nzType="search"></span>
                </ng-template>
            </div>
            <div class="button-create">
                <button nz-button nzType="primary" nzShape="circle" (click)="showModalRegister()">
                <span nz-icon nzType="plus" nzTheme="outline"></span>
              </button>
            </div>
        </div>
    </div>
    <div class="main-centent">
        <nz-table #smallTable nzSize="middle" [nzData]="ListFiliale">
            <thead>
                <tr>
                    <th>Libellé de la filiale</th>
                    <th>Sigle de la filiale</th>
                    <!-- <th>Date de création</th> -->
                    <th>Devise</th>
                    <th>Langue</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let data of smallTable.data">
                    <td>{{ data.libFiliale }}</td>
                    <td>{{ data.sigle }}</td>
                    <!-- <td>{{ data.createdAt }}</td> -->
                    <td><span [ngClass]="{'bg-warning': data.devise.idDevise}" class="badge bg-warning">
                      {{ data.devise.libDevise }}
                      </span>
                    </td>
                    <td><span [ngClass]="{'bg-success': data.langue.idLangue}" class="badge bg-success">
                        {{ data.langue.libLangue }}
                        </span>
                    </td>
                    <td style="display: flex;gap: 1rem;">
                        <button (click)="showModalRegister(data)" style="    background: #ff7900;
                      border: none;
                      color: white;justify-content: center;
                      display: flex;font-weight: bold;
                      align-items: center;" nz-button nzType="primary" nzShape="circle">
                    <span nz-icon nzType="edit" nzTheme="outline"></span>
                    </button>
                        <!-- <button style="background:#2e8b05;
                      border: none;
                      color: black;justify-content: center;
                      display: flex;
                      align-items: center;" nz-button nzType="primary" nzShape="circle">
                    <span nz-icon nzType="eye" nzTheme="outline"></span>
                    </button> -->
                        <button (click)="confirmSubmitDeletFiliale(data)" style="    background: red;
                      border: none;
                      color: black;justify-content: center;
                      display: flex;
                      align-items: center;" nz-button nzType="primary" nzShape="circle"><span nz-icon nzType="delete" nzTheme="outline"></span></button>
                    </td>
                </tr>
            </tbody>
        </nz-table>
    </div>
</div>


<nz-modal [(nzVisible)]="isVisible" [nzTitle]="modalTitle" [nzFooter]="modalFooter" (nzOnCancel)="handleCancel()" [nzMaskClosable]="false" [nzOkLoading]="isOkLoading" nzWidth="60%">
    <ng-template style="font-size: 1rem;" #modalTitle>{{titleModif}}</ng-template>
    <div *nzModalContent>
        <form [formGroup]="validateFormRegister" (ngSubmit)="submitFormFiliale()" class="form-content">
            <div class="content-el">
                <div class="login-part-one">

                    <nz-form-item style="margin: 0 0 1px;">
                        <nz-form-label [nzSm]="24" [nzXs]="24" nzRequired nzFor="nom">Libellé filiale</nz-form-label>
                        <nz-form-control [nzSm]="24" [nzXs]="24" nzErrorTip="Entrer le libellé de la filiale">
                            <input nz-input formControlName="libFiliale" id="libFiliale" style="width:100% ;  border: 2px solid gray;
                      " />
                        </nz-form-control>
                    </nz-form-item>

                    <nz-form-item>
                        <nz-form-label [nzSm]="24" [nzXs]="24" nzFor="email" nzRequired>Sigle de la filiale</nz-form-label>
                        <nz-form-control [nzSm]="24" [nzXs]="24" nzErrorTip="Entrer un sigle de la filiale">
                            <input nz-input id="sigle" formControlName="sigle" style="width:100% ;  border: 2px solid gray;
                        " (ngModelChange)="updateConfirmValidator()" />
                        </nz-form-control>
                    </nz-form-item>

                </div>

                <div class="login-part-two">

                    <nz-form-item>
                        <nz-form-label [nzSm]="24" [nzXs]="24" nzRequired nzFor="idRole">Assigner une dévise</nz-form-label>
                        <nz-select style="border: 2px solid gray;
                  " nzShowSearch nzAllowClear nzPlaceHolder="Select un rôle" nzErrorTip="Selectionner un rôle svp" formControlName="idDevise">
                            <nz-option *ngFor="let item of ListDevise" nzCustomContent [nzLabel]="item.libDevise" [nzValue]="item.idDevise">
                                {{item.libDevise}}
                            </nz-option>
                        </nz-select>
                    </nz-form-item>

                    <nz-form-item>
                        <nz-form-label [nzSm]="24" [nzXs]="24" nzRequired nzFor="idRole">Assigner une langue</nz-form-label>
                        <nz-select style="border: 2px solid gray;
                " nzShowSearch nzAllowClear nzPlaceHolder="Select un rôle" nzErrorTip="Selectionner un rôle svp" formControlName="idLangue">
                            <nz-option *ngFor="let item of ListLangue" nzCustomContent [nzLabel]="item.libLangue" [nzValue]="item.idLangue">
                                {{item.libLangue}}
                            </nz-option>
                        </nz-select>
                    </nz-form-item>

                </div>
            </div>

        </form>
    </div>
    <ng-template #modalFooter>
        <button nz-button nzType="default" (click)="handleCancel()">Annuler</button>
        <button nz-button nzType="primary" (click)="handleOkRegiter()" [nzLoading]="isConfirmLoading">{{titleBtn}}</button>
    </ng-template>
</nz-modal>
